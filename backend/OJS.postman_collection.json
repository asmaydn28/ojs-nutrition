{
	"info": {
		"_postman_id": "ojs-backend-api",
		"name": "OJS",
		"description": "OJS E-commerce Backend API Collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Register",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"username\": \"johndoe\",\n  \"email\": \"test@example.com\",\n  \"password\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"register"
							]
						},
						"description": "Register a new user"
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.accessToken) {",
									"        pm.collectionVariables.set('accessToken', response.data.accessToken);",
									"        pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login user and get access token"
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.accessToken) {",
									"        pm.collectionVariables.set('accessToken', response.data.accessToken);",
									"        pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/refresh",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"refresh"
							]
						},
						"description": "Refresh access token using refresh token"
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.accessToken) {",
									"        pm.collectionVariables.set('accessToken', response.data.accessToken);",
									"        pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "Get Me",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/auth/me",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"me"
							]
						},
						"description": "Get current authenticated user information"
					}
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/auth/logout",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"logout"
							]
						},
						"description": "Logout from current session"
					}
				},
				{
					"name": "Logout All",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/auth/logout-all",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"logout-all"
							]
						},
						"description": "Logout from all sessions"
					}
				}
			],
			"description": "Authentication endpoints"
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/users",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"users"
							]
						},
						"description": "Get all users"
					}
				},
				{
					"name": "Get User By ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/users/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"users",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "User ID"
								}
							]
						},
						"description": "Get user by ID"
					}
				},
				{
					"name": "Update User",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"username\": \"johndoe\",\n  \"email\": \"john.doe@example.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"users",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "User ID"
								}
							]
						},
						"description": "Update user information"
					}
				}
			],
			"description": "User management endpoints"
		},
		{
			"name": "Category",
			"item": [
				{
					"name": "Get All Categories",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/categories",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories"
							]
						},
						"description": "Get all categories (ordered by order field)"
					}
				},
				{
					"name": "Get Category By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/categories/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Category ID"
								}
							]
						},
						"description": "Get category by ID"
					}
				},
				{
					"name": "Create Category",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Electronics\",\n  \"slug\": \"electronics\",\n  \"order\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/categories",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories"
							]
						},
						"description": "Create a new category"
					}
				},
				{
					"name": "Update Category",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Electronics Updated\",\n  \"slug\": \"electronics-updated\",\n  \"order\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/categories/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Category ID"
								}
							]
						},
						"description": "Update category"
					}
				},
				{
					"name": "Delete Category",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/categories/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"categories",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Category ID"
								}
							]
						},
						"description": "Delete category"
					}
				}
			],
			"description": "Category management endpoints"
		},
		{
			"name": "Product",
			"item": [
				{
					"name": "Get All Products",
					"request": {
						"method": "GET",
						"header": [],
					"url": {
						"raw": "{{baseUrl}}/api/products?categoryId=&search=&page=1&limit=10&min_price=&max_price=&min_rating=&sort=",
						"host": [
							"{{baseUrl}}"
						],
						"path": [
							"api",
							"products"
						],
						"query": [
							{
								"key": "categoryId",
								"value": "",
								"description": "Filter by category ID",
								"disabled": true
							},
							{
								"key": "search",
								"value": "",
								"description": "Search in product name",
								"disabled": true
							},
							{
								"key": "page",
								"value": "1",
								"description": "Page number",
								"disabled": true
							},
							{
								"key": "limit",
								"value": "10",
								"description": "Items per page",
								"disabled": true
							},
							{
								"key": "min_price",
								"value": "",
								"description": "Minimum price filter",
								"disabled": true
							},
							{
								"key": "max_price",
								"value": "",
								"description": "Maximum price filter",
								"disabled": true
							},
							{
								"key": "min_rating",
								"value": "",
								"description": "Minimum rating filter (1-5)",
								"disabled": true
							},
							{
								"key": "sort",
								"value": "",
								"description": "Sort by: price:asc, price:desc, rating:asc, rating:desc, createdAt:asc, createdAt:desc",
								"disabled": true
							}
						]
					},
					"description": "Get all products with filtering, sorting and pagination"
					}
				},
				{
					"name": "Get Product By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/products/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Product ID"
								}
							]
						},
						"description": "Get product by ID"
					}
				},
				{
					"name": "Get Product By Slug",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/products/slug/:slug",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products",
								"slug",
								":slug"
							],
							"variable": [
								{
									"key": "slug",
									"value": "",
									"description": "Product slug"
								}
							]
						},
						"description": "Get product by slug"
					}
				},
				{
					"name": "Create Product",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"categoryId\": \"category-id-here\",\n  \"name\": \"Product Name\",\n  \"slug\": \"product-name\",\n  \"shortExplanation\": \"Short description\",\n  \"longExplanation\": \"Long detailed description\",\n  \"price\": 99.99,\n  \"primaryPhotoUrl\": \"https://example.com/photo.jpg\",\n  \"stockQuantity\": 100\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/products",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products"
							]
						},
						"description": "Create a new product"
					}
				},
				{
					"name": "Update Product",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Product Name\",\n  \"slug\": \"updated-product-name\",\n  \"price\": 149.99\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/products/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Product ID"
								}
							]
						},
						"description": "Update product"
					}
				},
				{
					"name": "Delete Product",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/products/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Product ID"
								}
							]
						},
						"description": "Delete product"
					}
				}
			],
			"description": "Product management endpoints"
		},
		{
			"name": "Product Photos",
			"item": [
				{
					"name": "Create Product Photo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"productId\": \"product-id-here\",\n  \"url\": \"https://picsum.photos/800/600\",\n  \"size\": 102400,\n  \"isPrimary\": false\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/product-photos",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"product-photos"
							]
						},
						"description": "Add photo to product (order is automatically assigned)"
					}
				},
				{
					"name": "Get Product Photo By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/product-photos/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"product-photos",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Product Photo ID"
								}
							]
						},
						"description": "Get product photo by ID"
					}
				},
				{
					"name": "Update Product Photo",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"isPrimary\": true,\n  \"order\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/product-photos/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"product-photos",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Product Photo ID"
								}
							]
						},
						"description": "Update product photo (only order and isPrimary can be changed)"
					}
				},
				{
					"name": "Delete Product Photo",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/product-photos/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"product-photos",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Product Photo ID"
								}
							]
						},
						"description": "Delete product photo"
					}
				}
			],
			"description": "Product photo management endpoints"
		},
		{
			"name": "Comments",
			"item": [
				{
					"name": "Get All Comments",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/comments?product_id=&rating=",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"comments"
							],
							"query": [
								{
									"key": "product_id",
									"value": "",
									"description": "Filter by product ID",
									"disabled": true
								},
								{
									"key": "rating",
									"value": "",
									"description": "Filter by rating (1-5)",
									"disabled": true
								}
							]
						},
						"description": "Get all comments with optional filtering"
					}
				},
				{
					"name": "Get Comment By ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/comments/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"comments",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Comment ID"
								}
							]
						},
						"description": "Get comment by ID"
					}
				},
				{
					"name": "Create Comment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"productId\": \"product-id-here\",\n  \"title\": \"Great Product!\",\n  \"content\": \"This product is amazing. Highly recommended!\",\n  \"rating\": 5\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/comments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"comments"
							]
						},
						"description": "Create a new product comment"
					}
				},
				{
					"name": "Update Comment",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Updated Title\",\n  \"content\": \"Updated content\",\n  \"rating\": 4\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/comments/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"comments",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Comment ID"
								}
							]
						},
						"description": "Update comment (owner only)"
					}
				},
				{
					"name": "Delete Comment",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/comments/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"comments",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Comment ID"
								}
							]
						},
						"description": "Delete comment (owner only)"
					}
				}
			],
			"description": "Product comment management endpoints"
		},
		{
			"name": "Cart Items",
			"item": [
				{
					"name": "Add to Cart",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"productId\": \"product-id-here\",\n  \"quantity\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/cart-items",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"cart-items"
							]
						},
						"description": "Add product to cart (if same product exists, quantity will be increased)"
					}
				},
				{
					"name": "Get All Cart Items",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/cart-items",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"cart-items"
							]
						},
						"description": "Get all cart items for authenticated user"
					}
				},
				{
					"name": "Get Cart Item By ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/cart-items/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"cart-items",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Cart Item ID"
								}
							]
						},
						"description": "Get cart item by ID"
					}
				},
				{
					"name": "Update Cart Item",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"quantity\": 5\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/cart-items/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"cart-items",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Cart Item ID"
								}
							]
						},
						"description": "Update cart item quantity"
					}
				},
				{
					"name": "Delete Cart Item",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/cart-items/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"cart-items",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Cart Item ID"
								}
							]
						},
						"description": "Delete cart item by ID"
					}
				},
				{
					"name": "Clear Cart",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/cart-items",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"cart-items"
							]
						},
						"description": "Clear all cart items for authenticated user"
					}
				}
			],
			"description": "Shopping cart management endpoints"
		},
		{
			"name": "Orders",
			"item": [
				{
					"name": "Create Order",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"orders"
							]
						},
						"description": "Create order from cart items. Cart will be cleared and stock will be decreased automatically."
					}
				},
				{
					"name": "Get All Orders",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"orders"
							]
						},
						"description": "Get all orders for authenticated user"
					}
				},
				{
					"name": "Get Order By ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"orders",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Order ID"
								}
							]
						},
						"description": "Get order by ID (user can only access their own orders)"
					}
				},
				{
					"name": "Update Order Status",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"PAID\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"orders",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "",
									"description": "Order ID"
								}
							]
						},
						"description": "Update order status (PENDING, PAID, SHIPPED, DELIVERED, CANCELLED). User can only update their own orders."
					}
				}
			],
			"description": "Order management endpoints"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-add Authorization header if accessToken exists",
					"const accessToken = pm.collectionVariables.get('accessToken');",
					"if (accessToken && !pm.request.headers.has('Authorization')) {",
					"    pm.request.headers.add({",
					"        key: 'Authorization',",
					"        value: 'Bearer ' + accessToken",
					"    });",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-refresh token on 401 errors",
					"if (pm.response.code === 401) {",
					"    const refreshToken = pm.collectionVariables.get('refreshToken');",
					"    if (refreshToken) {",
					"        pm.sendRequest({",
					"            url: pm.collectionVariables.get('baseUrl') + '/api/auth/refresh',",
					"            method: 'POST',",
					"            header: {",
					"                'Content-Type': 'application/json'",
					"            },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify({ refreshToken: refreshToken })",
					"            }",
					"        }, function (err, res) {",
					"            if (!err && res.code === 200) {",
					"                const response = res.json();",
					"                if (response.data && response.data.accessToken) {",
					"                    pm.collectionVariables.set('accessToken', response.data.accessToken);",
					"                    pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
					"                }",
					"            }",
					"        });",
					"    }",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "accessToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "refreshToken",
			"value": "",
			"type": "string"
		}
	]
}

